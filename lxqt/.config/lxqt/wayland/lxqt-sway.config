# Default config for sway with additions for LXQt. There may be a newer default file in /etc/sway/config.
#
# Location is ~/.config/lxqt/wayland/lxqt-sway.config
#
# Read `man 5 sway` for a complete reference.

################## swayfx ######################

blur enable
blur_passes 3
#blur radius 1
#blur_noise 0.0
#blur_brightness 1.0
#blur_contrast
#blur_saturation


corner_radius 12

shadows enable
shadows_on_csd disable
shadow_blur_radius 45
shadow_color #000000AF
shadow_offset 3 7

#default_dim_inactive 0.1


################# end-fx ######################


### Variables
#
# Logo key. Use Mod1 for Alt.
set $mod Mod4
# Home row direction keys, like vim
set $left h
set $down j
set $up k
set $right l

# Your preferred terminal emulator
set $term dxterm

### Output configuration
#
# Example configuration:
#
#   output HDMI-A-1 resolution 1920x1080 position 1920,0
#
# You can get the names of your outputs by running: swaymsg -t get_outputs

### Idle configuration
#
# Example configuration:
#
# exec swayidle -w \
#          timeout 300 'swaylock -f -c 000000' \
#          timeout 600 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
#          before-sleep 'swaylock -f -c 000000'
#
# This will lock your screen after 300 seconds of inactivity, then turn off
# your displays after another 300 seconds, and turn your screens back on when
# resumed. It will also lock your screen before your computer goes to sleep.

### Input configuration
#
# Example configuration:
#
#   input "2:14:SynPS/2_Synaptics_TouchPad" {
#       dwt enabled
#       tap enabled
#       natural_scroll enabled
#       middle_emulation enabled
#   }
    input "type:keyboard"  {
    xkb_layout us
    xkb_options grp:alt_shift_toggle,grp_led:scroll
   }
#
# You can get the names of your inputs by running: swaymsg -t get_inputs
# Read `man 5 sway-input` for more information about this section.

### Key bindings
#
# Basics:
#

    # Reload the configuration file
    bindsym $mod+Shift+r reload

# LXQt Settings
    exec dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY
    exec lxqt-session && sway exit
    for_window [app_id="^lxqt-.*$"] floating enable
    for_window [app_id="cmst"] floating enable
    for_window [app_id="kvantummanager"] floating enable

    focus_on_window_activation focus

    
    bindsym XF86PowerOff exec lxqt-leave
    
   
    floating_modifier $mod normal

    # Exit sway (logs you out of your Wayland session)
    bindsym $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'

#
# Scratchpad:
#
    # Sway has a "scratchpad", which is a bag of holding for windows.
    # You can send windows there and get them back later.

    # Move the currently focused window to the scratchpad
    bindsym $mod+Shift+minus move scratchpad

    # Show the next scratchpad window or hide the focused scratchpad window.
    # If there are multiple scratchpad windows, this command cycles through them.
    bindsym $mod+minus scratchpad show
#
# Resizing containers:
#

# Multimedia
#    bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +5%
#    bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5%
#    bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
#    bindsym XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle
#    bindsym XF86MonBrightnessDown exec lxqt-config-brightness -d
#    bindsym XF86MonBrightnessUp exec lxqt-config-brightness -i
#    bindsym XF86AudioPlay exec playerctl play-pause
#    bindsym XF86AudioNext exec playerctl next
#    bindsym XF86AudioPrev exec playerctl previous


# switch/iterate between workspaces
bindsym $mod+Tab workspace next
bindsym $mod+Shift+Tab workspace prev

# move tiling windows via drag & drop by left-clicking into the title bar,
# or left-clicking anywhere into the window while holding the floating modifier.
#tiling_drag modifier titlebar
tiling_drag enable 

# start a terminal
bindsym $mod+Return exec dxterm
bindsym $mod+KP_Enter exec dxterm

# kill focused window
#bindsym $mod+Shift+q [title="^(?!pcmanfm-desktop.*$)" con_id=__focused__] kill 
bindsym $mod+Shift+q  kill 


# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+x split h

# split in vertical orientation
bindsym $mod+z split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+q layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+v focus parent

# focus the child container
bindsym $mod+shift+v focus child

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"
set $ws11 "11"
set $ws12 "12"
set $ws13 "13"
set $ws14 "14"
set $ws15 "15"
set $ws16 "16"
set $ws17 "17"
set $ws18 "18"
set $ws19 "19"
set $ws20 "20"

# switch to workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10
bindsym $mod+F1 workspace number $ws11
bindsym $mod+F2 workspace number $ws12
bindsym $mod+F3 workspace number $ws13
bindsym $mod+F4 workspace number $ws14
bindsym $mod+F5 workspace number $ws15
bindsym $mod+F6 workspace number $ws16
bindsym $mod+F7 workspace number $ws17
bindsym $mod+F8 workspace number $ws18
bindsym $mod+F9 workspace number $ws19
bindsym $mod+F10 workspace number $ws20


# move focused container to workspace
bindsym $mod+Shift+1 	 move container to workspace number $ws1
bindsym $mod+Shift+2 	 move container to workspace number $ws2
bindsym $mod+Shift+3 	 move container to workspace number $ws3
bindsym $mod+Shift+4 	 move container to workspace number $ws4
bindsym $mod+Shift+5 	 move container to workspace number $ws5
bindsym $mod+Shift+6 	 move container to workspace number $ws6
bindsym $mod+Shift+7 	 move container to workspace number $ws7
bindsym $mod+Shift+8 	 move container to workspace number $ws8
bindsym $mod+Shift+9 	 move container to workspace number $ws9
bindsym $mod+Shift+0 	 move container to workspace number $ws10
bindsym $mod+Shift+F1  move container to workspace number $ws11
bindsym $mod+Shift+F2  move container to workspace number $ws12
bindsym $mod+Shift+F3  move container to workspace number $ws13
bindsym $mod+Shift+F4  move container to workspace number $ws14
bindsym $mod+Shift+F5  move container to workspace number $ws15
bindsym $mod+Shift+F6  move container to workspace number $ws16
bindsym $mod+Shift+F7  move container to workspace number $ws17
bindsym $mod+Shift+F8  move container to workspace number $ws18
bindsym $mod+Shift+F9  move container to workspace number $ws19
bindsym $mod+Shift+F10 move container to  workspace number $ws20

# reload the configuration file
bindsym $mod+Shift+c reload


mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
         bindsym h resize shrink width 4 px or 4 ppt
         bindsym j resize grow height 4 px or 4 ppt
         bindsym k resize shrink height 4 px or 4 ppt
         bindsym l resize grow width 4 px or 4 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 4 px or 4 ppt
        bindsym Down resize grow height 4 px or 4 ppt
        bindsym Up resize shrink height 4 px or 4 ppt
        bindsym Right resize grow width 4 px or 4 ppt

        # back to normal: Enter or Escape or $mod+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"
#bindsym $mod+Shift+d exec --no-startup-id rofi -modi drun -show drun -config ~/.config/rofi/rofidmenu.rasi

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
# bar {
#         position top
# 	status_command exec statusi3
# }


# Define colors variables:
set $darkbluetrans	#08052be6
set $darkblue		#08052b
set $lightblue		#5294e2
set $urgentred		#e53935
set $white		#ffffff
set $black		#000000
set $purple		#e345ff
set $darkpurple		#3f2f7f
set $darkgrey		#383c4a
set $grey		#b0b5bd
set $mediumgrey		#8b8b8b
set $yellowbrown	#e1b700
# 
# bar {
#                 font pango: Symbols Nerd Font Mono 9
# 		status_command i3blocks -c ~/.config/i3/i3blocks.conf
# 	    	position top
# #	    	i3bar_command i3bar --transparency
# # it could be that you have no primary display set: set one (xrandr --output <output> --primary)
# # reference: https://i3wm.org/docs/userguide.html#_tray_output
# 		    #tray_output primary
# 		    tray_padding 0
# 
# # When strip_workspace_numbers is set to yes,
# # any workspace that has a name of the form
# # “[n][:][NAME]” will display only the name.
#strip_workspace_numbers yes
# ##strip_workspace_name no
# 
# 		    colors {
# 		    separator          $purple
# 		    background         $black
# 		    statusline         $grey
# #                          		border 		        bg		txt		indicator
# 		focused_workspace	$lightblue	   	$darkpurple	$white	        $purple
# 		active_workspace	$lightblue      	$mediumgrey	$darkgrey	$purple
# 		inactive_workspace	$black   		$black  	$grey		$purple
# 		urgent_workspace	$urgentred	    	$urgentred	$white		$purple
# 	}
# }
# 
#			            标题框	标题背	文本	指示	  窗口边框
# class                 border  backgr. text    indicator child_border
client.focused          #5f74aa #000000 #ffffff #ffaccacf   #bf6cfacf
# 焦点不在
client.focused_inactive #111111 #222222 #777777 #4f1c6a70   #7070a070
# 或许是焦点不在该屏幕
client.unfocused        #0a0a0a #111111 #777777 #3f114a   #707aaa7a
client.urgent           #1f343a #900000 #ffffff #c000c0   #ff0000
client.placeholder      #000000 #0c0c0c #ffffff #7cff77cf #cc3f77cf

client.background       #ffffff

# floating pop up automatically
for_window [window_role="pop-up"] floating enable
for_window [app_id="lxqt-policykit-agent"] floating enable
for_window [app_id="pop-up"] floating enable
for_window [app_id="gwenview"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [title="记录$" class="QQ"] floating enable
for_window [class="mpv"] floating enable
for_window [app_id="mpv"] floating enable
for_window [title="^图片查看器$" class="QQ"] floating enable
#for_window [title="^((?!pcmanfm).)*$" workspace="^1$"] floating enable
default_border pixel 3


gaps inner 5
gaps outer 1
smart_gaps on


bindsym $mod+shift+semicolon exec --no-startup-id wayl
bindsym $mod+n exec --no-startup-id chwbg
#bindsym $mod+p exec --no-startup-id xfce4-terminal --drop-down 
# Use pactl to adjust volume in PulseAudio.
#set $refresh_i3status killall -SIGUSR1 i3status
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +1% 
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -1% 
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle 
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle 
bindsym Mod1+Control+Right exec playerctl next
bindsym Mod1+Control+L exec playerctl next
bindsym Mod1+Control+H  exec playerctl previous
bindsym Mod1+Control+Left  exec playerctl previous
bindsym Mod1+Control+j exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -1% 
bindsym Mod1+Control+k exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +1% 
bindsym Mod1+$mod+k exec --no-startup-id brightnessctl s +1%
bindsym Mod1+$mod+j exec --no-startup-id brightnessctl s 1%-
bindsym Mod1+$mod+l exec --no-startup-id brightnessctl s 0
bindsym Mod1+Control+space exec playerctl play-pause
bindsym XF86AudioPlay exec playerctl play-pause
bindsym $mod+p exec hyprpicker | wl-copy
bindsym $mod+Control+A exec grim -g "`slurp`" - |wl-copy  
bindsym $mod+Shift+A exec grim - |wl-copy  
bindsym $mod+A exec shadowclip
bindsym $mod+B exec mpvpaper '*' ~/Videos/Wallpapers -o "--no-audio"
bindsym $mod+Shift+B exec pkill mpvpaper
bindsym $mod+S exec wfrcg
bindsym $mod+i exec wlivt
bindsym $mod+t exec dock-toggle sway
bindsym $mod+g exec pkill -SIGUSR1 waybar
bindsym $mod+c exec nwg-clipman
bindsym $mod+shift+F exec freezedesk
bindsym $mod+d exec --no-startup-id wmenurun 
bindsym $mod+shift+d exec --no-startup-id lxqt-runner
bindsym $mod+Shift+o opacity plus 0.025
bindsym --whole-window $mod+Mod1+button4 opacity plus 0.025
bindsym $mod+o opacity minus 0.025
bindsym --whole-window $mod+Mod1+button5 opacity minus 0.025
#bindsym Mod1+Control+S exec vokoscreenNG
#bindsym $mod+button1 tilling toggle
bindgesture swipe:3:right workspace prev
bindgesture swipe:3:left workspace next
bindgesture swipe:4:up move up
bindgesture swipe:4:down move down
bindgesture swipe:4:left move left
bindgesture swipe:4:right move right
bindgesture pinch:4:inward floating enable
bindgesture pinch:4:outward floating disable
bindgesture pinch:4:inward+left move container to  workspace prev
bindgesture pinch:4:inward+right move container to  workspace next
bindgesture hold:4 exec grim - |wl-copy && notify-send 'Screenshot' 'OK!'
bindgesture hold:3 exec wayl
#bindgesture hold:1 exec pkill swaylock
#bindgesture swipe:3:up move container to  workspace number $ws20
bindgesture swipe:3:down exec swaync-client -op -sw
bindgesture swipe:3:up exec swaync-client -cp -sw
input type:touchpad {
  tap enabled
  natural_scroll enabled
}
input "type:keyboard" {
  xkb_numlock enabled
  repeat_delay 400
  repeat_rate 40
}
#exec systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK
#exec hash dbus-update-activation-environment 2>/dev/null && dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK
exec --no-startup-id swaync
#exec --no-startup-id swww-daemon

exec --no-startup-id waybar -c ~/.config/waybar/sway.jsonc

exec --no-startup-id dock-toggle sway
exec --no-startup-id /usr/bin/lxqt-policykit-agent
exec --no-startup-id wsst
exec --no-startup-id wl-paste --type text --watch cliphist store
exec --no-startup-id wl-paste --type image --watch cliphist store


include /etc/sway/config.d/*
